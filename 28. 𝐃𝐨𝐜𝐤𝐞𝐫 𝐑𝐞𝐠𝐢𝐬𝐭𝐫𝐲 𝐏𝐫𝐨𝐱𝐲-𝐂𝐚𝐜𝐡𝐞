আপনি যদি বড় আকারে CI/CD ইমপ্লিমেন্ট করেন আপনার অর্গানাইজেশনে তাহলে খুব কমন একটি সমস্যার সম্মুখীন আপনি হতে পারেন। সমস্যাটি হল ডকার ইমেজ পুল না করতে পেরে CI/CD পাইপলাইনগুলোর ফেইল হওয়া।

 ধরুন ডেভেলপারের প্রত্যেক গিট পুশ, মার্জ রিকোয়েস্টে কিছু টেস্ট কেস আপনার পাইপলাইনে এক্সিকিউট হয়, এবং CI এ টেস্টগুলো একটি ডকার ইমেজের ওপর কাজ করছে। তাহলে আপনার সেই একটি ডকার ইমেজ অনেক বেশি পুল করতে হবে ডকারহাব থেকে।

এখানেই সমস্যাটি। ডকারহাব Unauthorized ব্যবহারকারীদের একই আইপি থেকে ৬ঘন্টায় মাত্র ১০০ বার ইমেজ পুল করতে দেয়, রেট-লিমিট করে । এবং এসব ইমেজ পুল করতে প্রচুর পরিমাণ ব্যান্ডউইথের প্রয়োজন হয়।

কিভাবে এই সমস্যার সমাধান হতে পারে?
ডকারহাবের কোন বিকল্প নেই। প্রায় সকল অফিশিয়াল ইমেজ আপনি ডকারহাব থেকেই পাবেন। আমরা যদি একটি প্রাইভেট ডকার রেজিস্ট্রি সেট-আপ করে নেই তাহলে সেটিকে ডকারহাব প্রক্সি এবং Cache হিসেবেও ব্যবহার করতে পারব। তাহলে আমাদের রেট-লিমিটের ইস্যুর সমাধানও হয়, ব্যান্ডউইথের ইস্যুও আর থাকে না।

কিভাবে ডকার প্রাইভেট রেজিস্ট্রি (Harbor) এ ডকার প্রক্সি/Cache রিপোসিটরি বানাবো? 
হার্বার ইনস্টল করার পর,তার Admin UI থেকে  Administration -> Registries এ গিয়ে একটি নতুন রেজিস্ট্রি এন্ডপয়েন্ট বানাতে হবে এবং সেখানে প্রোভাইডার Docker Hub দিতে হবে। প্রোভাইডার তৈরি হয়ে গেলে প্রজেক্টে গিয়ে নতুন প্রজেক্ট তৈরি করার সময় “proxy cache” বাটন ইনেবল করে আগের স্টেপে তৈরি করা রেজিস্ট্রি দেখিয়ে দিতে হবে।

যদি আমাদের প্রজেক্টের নাম devops-proxy হয় এবং সেটআপ করা Harbor এর URL হয় harbor. example. com তাহলে ডকার হাবের ইমেজ পুল করার জন্য এবং Cache করে রাখার জন্য নিচের কমান্ড ব্যবহার করা যেতে পারেঃ

docker pull harbor. example. com/devops-proxy/library/hello-world
